<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
    <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-map.js?key=ck2OXUAJsF0iz999XGQ62jyXo8AXOVp7"></script>
    <script
        src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-routing.js?key=ck2OXUAJsF0iz999XGQ62jyXo8AXOVp7"></script>

    <script type="text/javascript">
        const url = new URL(window.location.href);
        const searchParams = url.searchParams;
        console.log(searchParams.get('dest'))

        window.onload = function () {

            var map;
            var dir;

            map = L.map('map', {
                layers: MQ.mapLayer(),
                center: [38.895345, -77.030101],
                zoom: 15
            });

            dir = MQ.routing.directions();

            dir.route({
                locations: [
                    '239 ถ. ห้วยแก้ว ตำบลสุเทพ อำเภอเมืองเชียงใหม่ เชียงใหม่ 50200',
                    searchParams.get('dest')
                ]
            });

            map.addLayer(MQ.routing.routeLayer({
                directions: dir,
                fitBounds: true
            }));
        }
    </script>
</head>

<body style='border:0; margin: 0'>
    <div id='map' style='width: 100%; height:530px;'></div>
</body>

</html>